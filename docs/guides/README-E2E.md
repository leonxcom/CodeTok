# CodeTok E2E AI 代码生成功能

## 概述

CodeTok 现已集成完整的端到端 AI 代码生成功能，让用户可以通过自然语言描述来生成、预览和运行代码。

## 功能特性

### 🔍 搜索为中心的首页
- **全新首页设计**：以搜索为核心的入口页面
- **智能搜索**：支持搜索项目、开发者和技术栈
- **热门标签**：快速访问流行的代码类型
- **多标签切换**：搜索、推荐、热门内容无缝切换

### 🤖 AI 代码生成器
- **自然语言输入**：用中文或英文描述需求
- **多种框架支持**：
  - Next.js / React 应用
  - Vue.js 应用  
  - Python 脚本
  - HTML/CSS/JS 页面
  - Streamlit 应用

### 💬 智能对话界面
- **实时对话**：与 AI 进行多轮对话
- **代码预览**：生成的代码即时显示
- **语法高亮**：清晰的代码展示
- **模板选择**：支持自动选择或手动指定框架

### 🚀 实时预览与执行
- **沙盒运行**：安全的代码执行环境
- **实时预览**：Web 应用立即可见
- **输出展示**：Python 脚本执行结果
- **错误处理**：友好的错误信息展示

## 技术架构

### 前端组件
```
src/components/ai/
├── chat-interface.tsx      # 主聊天界面
└── (其他AI相关组件)

src/app/[locale]/page.tsx   # 重新设计的首页
```

### API 端点
```
/api/ai/chat     # AI 代码生成
/api/ai/sandbox  # 代码执行沙盒
```

### 核心库
```
src/lib/ai/
├── schema.ts       # AI 输出数据结构
├── templates.ts    # 代码模板定义
├── models.ts       # AI 模型配置
└── providers.ts    # AI 提供商集成
```

## 使用方式

### 1. 访问 AI 代码生成器

1. 打开首页 `http://localhost:3000/zh-cn`
2. 点击 "AI 代码生成" 卡片
3. 或者直接在搜索页面点击 AI 生成功能

### 2. 生成代码

1. **选择框架**：自动选择或手动指定
2. **描述需求**：用自然语言描述想要的功能
   ```
   示例：创建一个待办事项列表应用，支持添加、删除和标记完成
   ```
3. **提交请求**：点击发送按钮
4. **查看结果**：AI 会生成代码并自动切换到代码预览

### 3. 预览和运行

1. **代码标签页**：查看生成的源代码
2. **预览标签页**：查看运行效果
3. **复制代码**：一键复制到剪贴板
4. **新窗口打开**：在独立窗口中查看应用

## 示例对话

```
用户：创建一个简单的计算器网页

AI：我来为您创建一个简单的计算器网页...

生成：
- 文件：index.html  
- 功能：基本四则运算
- 样式：现代化界面
- 预览：立即可用
```

## 支持的代码类型

### Web 应用
- ✅ Next.js 应用（SSR/SSG）
- ✅ React 单页应用
- ✅ Vue.js 应用
- ✅ 静态 HTML 页面

### 后端脚本
- ✅ Python 脚本
- ✅ 数据处理
- ✅ API 服务

### 数据应用
- ✅ Streamlit 数据应用
- ✅ 图表和可视化
- ✅ 机器学习演示

## 开发说明

### 环境要求
- Node.js 18+
- TypeScript 5+
- Next.js 15+

### 关键依赖
```json
{
  "ai": "^3.x",           // AI SDK
  "zod": "^3.x",          // 数据验证
  "lucide-react": "^0.x", // 图标库
  "tailwindcss": "^3.x"   // 样式框架
}
```

### 配置环境变量
```bash
# .env.local
OPENAI_API_KEY=your_openai_key
# 或其他 AI 提供商的密钥
```

## 未来规划

### 短期目标
- [ ] 集成真实的 E2B 沙盒服务
- [ ] 添加代码分享功能  
- [ ] 支持更多编程语言
- [ ] 代码历史记录

### 长期愿景
- [ ] 协作编程功能
- [ ] 代码库集成
- [ ] 自定义模板
- [ ] 企业级部署

## 故障排除

### 常见问题

**Q: AI 生成失败**
A: 检查 API 密钥配置，确保网络连接正常

**Q: 预览无法加载**  
A: 沙盒服务可能需要时间启动，请稍等片刻

**Q: 代码无法复制**
A: 确保浏览器支持剪贴板 API

### 开发调试
```bash
# 查看开发日志
npm run dev

# 检查构建
npm run build

# 测试类型
npm run type-check
```

---

## 贡献指南

欢迎贡献代码和建议！请参考主项目的贡献指南。

## 许可证

本项目采用与主项目相同的许可证。 